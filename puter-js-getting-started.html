<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puter.js å…¥é—¨æ¼”ç¤º - æ— æœåŠ¡å™¨ AI å’Œäº‘æœåŠ¡</title>
    <script src="https://js.puter.com/v2/"></script>
    <style>
        :root {
            --primary-color: #6366f1;
            --secondary-color: #8b5cf6;
            --accent-color: #06b6d4;
            --bg-color: #0f172a;
            --surface-color: #1e293b;
            --text-color: #f8fafc;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --border-color: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-color), #1e1b4b);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(30, 41, 59, 0.8);
            border-radius: 20px;
            border: 2px solid var(--primary-color);
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 15px;
        }

        .header p {
            font-size: 1.1rem;
            color: var(--accent-color);
            opacity: 0.9;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .demo-card {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid var(--border-color);
            border-radius: 15px;
            padding: 25px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .demo-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
        }

        .demo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(99, 102, 241, 0.3);
            border-color: var(--accent-color);
        }

        .demo-title {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .demo-icon {
            font-size: 1.5rem;
        }

        .demo-description {
            color: var(--text-color);
            opacity: 0.8;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .demo-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-color);
            font-size: 14px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .demo-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 10px rgba(99, 102, 241, 0.3);
        }

        .demo-textarea {
            min-height: 80px;
            resize: vertical;
        }

        .demo-button {
            background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 15px;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
        }

        .demo-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .demo-output {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            min-height: 100px;
            max-height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.4;
            white-space: pre-wrap;
        }

        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(99, 102, 241, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .status-bar {
            background: rgba(15, 23, 42, 0.9);
            border: 1px solid var(--primary-color);
            border-radius: 10px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
        }

        .status-item {
            display: inline-block;
            margin: 0 20px;
        }

        .status-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-color);
            display: block;
        }

        .status-label {
            font-size: 0.9rem;
            opacity: 0.7;
        }

        .feature-highlight {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(6, 182, 212, 0.1));
            border: 1px solid var(--primary-color);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            text-align: center;
        }

        .feature-highlight h3 {
            color: var(--accent-color);
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .feature-item {
            background: rgba(30, 41, 59, 0.6);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .success-message {
            color: var(--success-color);
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid var(--success-color);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .error-message {
            color: var(--error-color);
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--error-color);
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .demo-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .status-item {
                display: block;
                margin: 10px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ Puter.js å…¥é—¨æ¼”ç¤º</h1>
            <p>æ— æœåŠ¡å™¨ AIã€äº‘å­˜å‚¨å’Œèº«ä»½éªŒè¯ - 100% å…è´¹ï¼Œæ— éœ€ API å¯†é’¥</p>
        </div>

        <div class="status-bar">
            <div class="status-item">
                <span class="status-value" id="authStatus">æ£€æŸ¥ä¸­...</span>
                <span class="status-label">èº«ä»½éªŒè¯çŠ¶æ€</span>
            </div>
            <div class="status-item">
                <span class="status-value" id="requestCount">0</span>
                <span class="status-label">API è¯·æ±‚æ¬¡æ•°</span>
            </div>
            <div class="status-item">
                <span class="status-value" id="filesCount">0</span>
                <span class="status-label">äº‘æ–‡ä»¶æ•°é‡</span>
            </div>
        </div>

        <div class="demo-grid">
            <!-- AI èŠå¤©æ¼”ç¤º -->
            <div class="demo-card">
                <div class="demo-title">
                    <span class="demo-icon">ğŸ¤–</span>
                    GPT-4o AI èŠå¤©
                </div>
                <div class="demo-description">
                    ä½¿ç”¨ GPT-4o è¿›è¡Œæ™ºèƒ½å¯¹è¯ï¼Œå®Œå…¨å…è´¹ï¼Œæ— éœ€ API å¯†é’¥
                </div>
                <textarea 
                    class="demo-input demo-textarea" 
                    id="aiPrompt" 
                    placeholder="è¾“å…¥ä½ çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼šä¸ºä»€ä¹ˆé¸¡è¦è¿‡é©¬è·¯ï¼Ÿ"
                >ä¸ºä»€ä¹ˆé¸¡è¦è¿‡é©¬è·¯ï¼Ÿ</textarea>
                <button class="demo-button" onclick="testAIChat()">
                    ğŸ’¬ å¼€å§‹ AI å¯¹è¯
                </button>
                <div class="demo-output" id="aiOutput">ç­‰å¾… AI å“åº”...</div>
            </div>

            <!-- äº‘å­˜å‚¨æ¼”ç¤º -->
            <div class="demo-card">
                <div class="demo-title">
                    <span class="demo-icon">â˜ï¸</span>
                    äº‘æ–‡ä»¶å­˜å‚¨
                </div>
                <div class="demo-description">
                    åœ¨äº‘ç«¯å­˜å‚¨å’Œè¯»å–æ–‡ä»¶ï¼Œæ•°æ®æ°¸ä¹…ä¿å­˜
                </div>
                <input 
                    class="demo-input" 
                    id="fileName" 
                    placeholder="æ–‡ä»¶åï¼Œå¦‚ï¼šhello.txt"
                    value="hello.txt"
                >
                <textarea 
                    class="demo-input demo-textarea" 
                    id="fileContent" 
                    placeholder="æ–‡ä»¶å†…å®¹"
                >Hello, Puter.js! è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªäº‘æ–‡ä»¶ã€‚</textarea>
                <button class="demo-button" onclick="testFileStorage()">
                    ğŸ’¾ ä¿å­˜åˆ°äº‘ç«¯
                </button>
                <button class="demo-button" onclick="testFileRead()">
                    ğŸ“– ä»äº‘ç«¯è¯»å–
                </button>
                <div class="demo-output" id="fileOutput">ç­‰å¾…æ–‡ä»¶æ“ä½œ...</div>
            </div>

            <!-- é”®å€¼å­˜å‚¨æ¼”ç¤º -->
            <div class="demo-card">
                <div class="demo-title">
                    <span class="demo-icon">ğŸ—ƒï¸</span>
                    é”®å€¼å­˜å‚¨
                </div>
                <div class="demo-description">
                    ä¿å­˜ç”¨æˆ·åå¥½è®¾ç½®å’Œåº”ç”¨æ•°æ®
                </div>
                <input 
                    class="demo-input" 
                    id="kvKey" 
                    placeholder="é”®åï¼Œå¦‚ï¼šuser_preference"
                    value="user_preference"
                >
                <input 
                    class="demo-input" 
                    id="kvValue" 
                    placeholder="å€¼ï¼Œå¦‚ï¼šdark_mode"
                    value="dark_mode"
                >
                <button class="demo-button" onclick="testKVSet()">
                    ğŸ’¾ ä¿å­˜é”®å€¼å¯¹
                </button>
                <button class="demo-button" onclick="testKVGet()">
                    ğŸ” è·å–å€¼
                </button>
                <div class="demo-output" id="kvOutput">ç­‰å¾…é”®å€¼æ“ä½œ...</div>
            </div>

            <!-- èº«ä»½éªŒè¯æ¼”ç¤º -->
            <div class="demo-card">
                <div class="demo-title">
                    <span class="demo-icon">ğŸ”</span>
                    ç”¨æˆ·èº«ä»½éªŒè¯
                </div>
                <div class="demo-description">
                    è‡ªåŠ¨å¤„ç†ç”¨æˆ·ç™»å½•å’Œèº«ä»½éªŒè¯
                </div>
                <button class="demo-button" onclick="checkAuthStatus()">
                    ğŸ” æ£€æŸ¥ç™»å½•çŠ¶æ€
                </button>
                <button class="demo-button" onclick="signInUser()">
                    ğŸšª ç”¨æˆ·ç™»å½•
                </button>
                <button class="demo-button" onclick="getUserInfo()">
                    ğŸ‘¤ è·å–ç”¨æˆ·ä¿¡æ¯
                </button>
                <div class="demo-output" id="authOutput">ç­‰å¾…èº«ä»½éªŒè¯æ“ä½œ...</div>
            </div>
        </div>

        <div class="feature-highlight">
            <h3>ğŸŒŸ Puter.js æ ¸å¿ƒç‰¹æ€§</h3>
            <div class="feature-list">
                <div class="feature-item">
                    <strong>ğŸ†“ å®Œå…¨å…è´¹</strong><br>
                    æ— éœ€ API å¯†é’¥æˆ–ä»˜è´¹è®¡åˆ’
                </div>
                <div class="feature-item">
                    <strong>ğŸ¤– AI åŠŸèƒ½</strong><br>
                    GPT-4o, Claude, DALL-E ç­‰
                </div>
                <div class="feature-item">
                    <strong>â˜ï¸ äº‘å­˜å‚¨</strong><br>
                    æ–‡ä»¶å­˜å‚¨å’Œé”®å€¼æ•°æ®åº“
                </div>
                <div class="feature-item">
                    <strong>ğŸ” èº«ä»½éªŒè¯</strong><br>
                    è‡ªåŠ¨ç”¨æˆ·ç®¡ç†
                </div>
                <div class="feature-item">
                    <strong>ğŸš€ æ— æœåŠ¡å™¨</strong><br>
                    æ— éœ€åç«¯é…ç½®
                </div>
                <div class="feature-item">
                    <strong>ğŸ’° ç”¨æˆ·ä»˜è´¹</strong><br>
                    å¼€å‘è€…é›¶æˆæœ¬
                </div>
            </div>
        </div>
    </div>

    <script>
        let requestCount = 0;
        let filesCount = 0;

        // æ›´æ–°çŠ¶æ€æ 
        function updateStatus() {
            document.getElementById('requestCount').textContent = requestCount;
            document.getElementById('filesCount').textContent = filesCount;
        }

        // å¢åŠ è¯·æ±‚è®¡æ•°
        function incrementRequest() {
            requestCount++;
            updateStatus();
        }

        // è¾“å‡ºæ¶ˆæ¯åˆ°æŒ‡å®šåŒºåŸŸ
        function outputMessage(elementId, message, isError = false) {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            const className = isError ? 'error-message' : 'success-message';
            element.innerHTML = `<div class="${className}">[${timestamp}] ${message}</div>`;
        }

        // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        function showLoading(elementId, message = 'å¤„ç†ä¸­...') {
            const element = document.getElementById(elementId);
            element.innerHTML = `<span class="loading"></span>${message}`;
        }

        // AI èŠå¤©æµ‹è¯•
        async function testAIChat() {
            const prompt = document.getElementById('aiPrompt').value.trim();
            if (!prompt) {
                outputMessage('aiOutput', 'è¯·è¾“å…¥é—®é¢˜ï¼', true);
                return;
            }

            showLoading('aiOutput', 'æ­£åœ¨ä¸ GPT-4o å¯¹è¯...');
            incrementRequest();

            try {
                const response = await puter.ai.chat(prompt);
                outputMessage('aiOutput', `AI å›å¤ï¼š\n${response}`);
            } catch (error) {
                outputMessage('aiOutput', `é”™è¯¯ï¼š${error.message}`, true);
            }
        }

        // æ–‡ä»¶å­˜å‚¨æµ‹è¯•
        async function testFileStorage() {
            const fileName = document.getElementById('fileName').value.trim();
            const fileContent = document.getElementById('fileContent').value.trim();
            
            if (!fileName || !fileContent) {
                outputMessage('fileOutput', 'è¯·è¾“å…¥æ–‡ä»¶åå’Œå†…å®¹ï¼', true);
                return;
            }

            showLoading('fileOutput', 'æ­£åœ¨ä¿å­˜åˆ°äº‘ç«¯...');
            incrementRequest();

            try {
                await puter.fs.write(fileName, fileContent);
                filesCount++;
                updateStatus();
                outputMessage('fileOutput', `æ–‡ä»¶ "${fileName}" å·²æˆåŠŸä¿å­˜åˆ°äº‘ç«¯ï¼`);
            } catch (error) {
                outputMessage('fileOutput', `ä¿å­˜å¤±è´¥ï¼š${error.message}`, true);
            }
        }

        // æ–‡ä»¶è¯»å–æµ‹è¯•
        async function testFileRead() {
            const fileName = document.getElementById('fileName').value.trim();
            
            if (!fileName) {
                outputMessage('fileOutput', 'è¯·è¾“å…¥æ–‡ä»¶åï¼', true);
                return;
            }

            showLoading('fileOutput', 'æ­£åœ¨ä»äº‘ç«¯è¯»å–...');
            incrementRequest();

            try {
                const fileContent = await puter.fs.read(fileName);
                const text = await fileContent.text();
                outputMessage('fileOutput', `æ–‡ä»¶å†…å®¹ï¼š\n${text}`);
            } catch (error) {
                outputMessage('fileOutput', `è¯»å–å¤±è´¥ï¼š${error.message}`, true);
            }
        }

        // é”®å€¼å­˜å‚¨è®¾ç½®
        async function testKVSet() {
            const key = document.getElementById('kvKey').value.trim();
            const value = document.getElementById('kvValue').value.trim();
            
            if (!key || !value) {
                outputMessage('kvOutput', 'è¯·è¾“å…¥é”®åå’Œå€¼ï¼', true);
                return;
            }

            showLoading('kvOutput', 'æ­£åœ¨ä¿å­˜é”®å€¼å¯¹...');
            incrementRequest();

            try {
                await puter.kv.set(key, value);
                outputMessage('kvOutput', `é”®å€¼å¯¹ "${key}" = "${value}" å·²ä¿å­˜ï¼`);
            } catch (error) {
                outputMessage('kvOutput', `ä¿å­˜å¤±è´¥ï¼š${error.message}`, true);
            }
        }

        // é”®å€¼å­˜å‚¨è·å–
        async function testKVGet() {
            const key = document.getElementById('kvKey').value.trim();
            
            if (!key) {
                outputMessage('kvOutput', 'è¯·è¾“å…¥é”®åï¼', true);
                return;
            }

            showLoading('kvOutput', 'æ­£åœ¨è·å–å€¼...');
            incrementRequest();

            try {
                const value = await puter.kv.get(key);
                outputMessage('kvOutput', `é”® "${key}" çš„å€¼ï¼š${value || '(æœªæ‰¾åˆ°)'}`);
            } catch (error) {
                outputMessage('kvOutput', `è·å–å¤±è´¥ï¼š${error.message}`, true);
            }
        }

        // æ£€æŸ¥èº«ä»½éªŒè¯çŠ¶æ€
        async function checkAuthStatus() {
            showLoading('authOutput', 'æ£€æŸ¥èº«ä»½éªŒè¯çŠ¶æ€...');
            incrementRequest();

            try {
                const isSignedIn = puter.auth.isSignedIn();
                const status = isSignedIn ? 'å·²ç™»å½•' : 'æœªç™»å½•';
                outputMessage('authOutput', `èº«ä»½éªŒè¯çŠ¶æ€ï¼š${status}`);
                
                // æ›´æ–°çŠ¶æ€æ 
                document.getElementById('authStatus').textContent = status;
            } catch (error) {
                outputMessage('authOutput', `æ£€æŸ¥å¤±è´¥ï¼š${error.message}`, true);
            }
        }

        // ç”¨æˆ·ç™»å½•
        async function signInUser() {
            showLoading('authOutput', 'æ­£åœ¨å¤„ç†ç™»å½•...');
            incrementRequest();

            try {
                await puter.auth.signIn();
                outputMessage('authOutput', 'ç”¨æˆ·ç™»å½•æˆåŠŸï¼');
                document.getElementById('authStatus').textContent = 'å·²ç™»å½•';
            } catch (error) {
                outputMessage('authOutput', `ç™»å½•å¤±è´¥ï¼š${error.message}`, true);
            }
        }

        // è·å–ç”¨æˆ·ä¿¡æ¯
        async function getUserInfo() {
            showLoading('authOutput', 'è·å–ç”¨æˆ·ä¿¡æ¯...');
            incrementRequest();

            try {
                const user = await puter.auth.getUser();
                outputMessage('authOutput', `ç”¨æˆ·ä¿¡æ¯ï¼š\n${JSON.stringify(user, null, 2)}`);
            } catch (error) {
                outputMessage('authOutput', `è·å–å¤±è´¥ï¼š${error.message}`, true);
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥èº«ä»½éªŒè¯çŠ¶æ€
        window.addEventListener('load', async () => {
            try {
                const isSignedIn = puter.auth.isSignedIn();
                document.getElementById('authStatus').textContent = isSignedIn ? 'å·²ç™»å½•' : 'æœªç™»å½•';
            } catch (error) {
                document.getElementById('authStatus').textContent = 'æ£€æŸ¥å¤±è´¥';
            }
        });

        // æ·»åŠ é”®ç›˜å¿«æ·é”®
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey || e.metaKey) {
                switch (e.key) {
                    case 'Enter':
                        e.preventDefault();
                        if (document.activeElement.id === 'aiPrompt') {
                            testAIChat();
                        }
                        break;
                }
            }
        });
    </script>
</body>
</html>